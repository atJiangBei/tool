(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b0b92d"],{"159b":function(t,e,i){var n=i("da84"),a=i("fdbc"),r=i("17c2"),s=i("9112");for(var o in a){var c=n[o],l=c&&c.prototype;if(l&&l.forEach!==r)try{s(l,"forEach",r)}catch(d){l.forEach=r}}},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,a=i("a640"),r=i("ae40"),s=a("forEach"),o=r("forEach");t.exports=s&&o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,i){var n=i("d039"),a=i("b622"),r=i("2d00"),s=a("species");t.exports=function(t){return r>=51||!n((function(){var e=[],i=e.constructor={};return i[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3bb7":function(t,e,i){},"3f46":function(t,e,i){"use strict";i.r(e);var n=i("7a23"),a={class:"create-container"},r=Object(n["e"])('<div class="do-container"><h3>初始画布</h3><div><div class="layer-size-container"><label>高:</label><input type="number" value="1080" min="1080" max="3000" id="canvasHeight" placeholder="高度"><label>宽:</label><input type="number" value="720" min="720" max="2000" id="canvasWidth" placeholder="宽度"></div><div class="layer-rgb-container" id="layerRgbContainer"><div><label>R:</label><input type="number" value="240" min="0" max="255" placeholder="高度"></div><label>G:</label><input type="number" value="240" min="0" max="255" placeholder="宽度"><label>B:</label><input type="number" value="240" min="0" max="255" placeholder="宽度"><div class="preview-block-container"><div class="create-img-btn" data-type="preview">预览</div><div class="block-rgb-container" id="blockRgbContainer" style="background:rgb(240,240,240);"></div></div></div><div class="init-create-canvas"><div class="create-img-btn" id="createCanvas">生成画布</div><div class="create-img-btn" id="resetCanvas">重置画布</div></div></div><h3>新增图层</h3><div class="add-img-to-canvas" id="addImgToCanvas"><input type="file" id="uploadControl" accept="image/png,image/jpeg,image/jpg"></div><h3>图层位置调整度</h3><div class="console-container"><ul class="threshold-container"><li class="threshold-add" id="thresholdAdd"></li><li class="threshold-value" id="thresholdValue">1</li><li class="threshold-reduce" id="thresholdReduce"></li></ul></div><h3>当前图层</h3><div class="current-layer-container" id="currentLayerContainer"></div><h3>最终</h3><div class="last-container"><div class="create-img-btn" id="previewBlockImg">预览</div><div class="create-img-btn" id="submitSave">保存上传</div></div></div><div class="canvas-simulation" id="canvasSimulation"></div><div class="create-img-block-popup" id="createImgBlockPopup"><span data-type="close"></span><img src="" id="blockCanvasContent"></div>',3);function s(t,e,i,s,o,c){return Object(n["q"])(),Object(n["d"])("div",a,[r])}i("99af"),i("4160"),i("c975"),i("d81d"),i("fb6a"),i("45fc"),i("a434"),i("b0c0"),i("d3b7"),i("159b");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),t}function d(t){var e=t.el,i=t.background,n=t.width,a=t.height,r=t.data,s=e.getContext("2d");s.fillStyle=i,s.fillRect(0,0,n,a);var o=r.slice();while(o.length){var c=o.shift();s.drawImage(c.el,0,0,c.width,c.height,c.left,c.top,c.width,c.height)}return e}function u(t,e,i,n){Object.defineProperty(t,e,{get:function(){return i},set:function(t){i=t,n&&n(i)}})}function h(t){return new Promise((function(e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(t)}))}function v(t,e,i){var n="";return i&&(n='checked="true"'),'<div class="set-size-container">\n\t\t\t\t<div class="set-size-head">\n\t\t\t\t\t图层信息\n\t\t\t\t\t<span data-type=\'delete\'></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="set-layer-name">\n\t\t\t\t\t图片名称：'.concat(e,'\n\t\t\t\t</div>\n\t\t\t\t<div class="set-size-content">\n\t\t\t\t\t<div class="set-size-add" data-type=\'add\'></div>\n\t\t\t\t\t<div class="set-size-block">').concat(t,'</div>\n\t\t\t\t\t<div class="set-size-reduce" data-type=\'reduce\'></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="set-position-content">\n\t\t\t\t\t<div class="set-position-xy">\n\t\t\t\t\t\t<label>x:</label>\n\t\t\t\t\t\t<input type="number" data-type=\'x\' value="0" min="0"/>\n\t\t\t\t\t\t<label>y:</label>\n\t\t\t\t\t\t<input type="number" data-type=\'y\' value="0" min="0"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="set-position-container">\n\t\t\t\t\t\t<div class="create-img-btn"  data-type=\'setxy\'>根据xy坐标调整位置</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="set-layer-attribute">\n\t\t\t\t\t<label>是否为人像层：</label>\n\t\t\t\t\t<input type="checkbox" data-type="ispeople" ').concat(n,"/>\n\t\t\t\t</div>\n\t\t\t</div>")}var f=function(){function t(e){var i=this,n=e.el,a=e.left,r=e.top,s=e.width,c=e.height,l=e.parentHeight,d=e.parentWidth,u=e.check;o(this,t),this.el="string"===typeof n?document.querySelector(n):n,this.left=a,this.top=r,this.minLeft=0,this.minTop=0,this.parentHeight=l,this.parentWidth=d,this.canMove=!1,this.el.addEventListener("mousedown",(function(t){return i.mousedown(t)})),this.el.addEventListener("mousemove",(function(t){return i.mousemove(t)})),document.addEventListener("mouseup",(function(t){return i.mouseup(t)})),this.el.addEventListener("dblclick",(function(t){return i.select(t)})),this.startX=0,this.startY=0,this.height=c,this.width=s,this.maxTop=this.parentHeight-this.height,this.maxLeft=this.parentWidth-this.width,this.checked=!1,this.check=u,this.setPosition(this.left,this.top)}return l(t,[{key:"setBoundary",value:function(){}},{key:"select",value:function(){this.checked=!this.checked,this.el.classList.toggle("canvas-layer-selected"),this.check&&this.check(this.checked)}},{key:"blur",value:function(){this.checked=!this.checked,this.el.classList.remove("canvas-layer-selected")}},{key:"mousedown",value:function(t){this.canMove=!0,this.startX=t.pageX,this.startY=t.pageY,console.log()}},{key:"mousemove",value:function(t){this.canMove&&(this.left+=t.pageX-this.startX,this.top+=t.pageY-this.startY,this.setPosition(this.left,this.top),this.startX=t.pageX,this.startY=t.pageY,t.preventDefault())}},{key:"mouseup",value:function(){this.canMove=!1}},{key:"setPosition",value:function(){this.left=Math.max(this.minLeft,this.left),this.left=Math.min(this.maxLeft,this.left),this.top=Math.max(this.minTop,this.top),this.top=Math.min(this.maxTop,this.top),this.el.style.transform="translate3d(".concat(this.left,"px, ").concat(this.top,"px, 0px)")}},{key:"setWidth",value:function(t){this.el.style.width=t+"px"}},{key:"setzIndex",value:function(t){this.zIndex=t,this.el.style.zIndex=t}},{key:"handDo",value:function(t,e){"x"===e&&(this.left+=t),"y"===e&&(this.top+=t),this.setPosition()}},{key:"moveTo",value:function(t,e){t=parseInt(t),e=parseInt(e),t===t&&e===e&&(this.left=t,this.top=e,this.setPosition())}}]),t}(),p=function(){function t(){o(this,t),this.list=[],this.maxLength=4}return l(t,[{key:"add",value:function(t){this.list.length!==this.maxLength&&(t.setzIndex(this.list.length),this.list.push(t))}},{key:"forward",value:function(t){var e=this.list,i=e.indexOf(t);e.length<2||i<0||i!==e.length-1&&(e.splice(i,1),e.splice(i+1,0,t),this.resetZindex())}},{key:"backoff",value:function(t){var e=this.list,i=e.indexOf(t);e.length<2||i<1||i!==e.length&&(e.splice(i,1),e.splice(i-1,0,t),this.resetZindex())}},{key:"deleteItem",value:function(t){var e=this.list.indexOf(t);e>-1&&(this.list.splice(e,1),this.resetZindex())}},{key:"resetZindex",value:function(){this.list.forEach((function(t,e){t.setzIndex(e)}))}}]),t}();function m(t){return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function g(t,e,i){var n=y.canvasSize;return new f({el:t,left:0,top:0,width:e,height:i,parentHeight:n.height,parentWidth:n.width,check:function(t){t?(y.varRemovableLayer&&y.varRemovableLayer.blur(),y.varRemovableLayer=this):y.varRemovableLayer=null}})}var y={thresholdValue:1,rgb:[240,240,240],canvasSize:{width:720,height:1080},Images:[],varRemovableLayer:null},b={mounted:function(){var t=new p;u(y,"varRemovableLayer",null,(function(t){console.log(t),x.innerHTML=t?v(t.zIndex,t.imgName,t.isPeople):""}));var e=!0,i=document.getElementById("createCanvas"),n=document.getElementById("resetCanvas"),a=document.getElementById("layerRgbContainer"),r=document.getElementById("blockRgbContainer"),s=a.getElementsByTagName("input"),o=document.getElementById("canvasHeight"),c=document.getElementById("canvasWidth"),l=document.getElementById("canvasSimulation");a.addEventListener("click",(function(t){var e=t.target;if("preview"===e.dataset.type){var i=s,n=[].slice.call(i).map((function(t){return t.value}));r.style.background=m(n)}})),i.addEventListener("click",(function(){if(e){var t=[].slice.call(s).map((function(t){return t.value}));console.log(t),y.rgb=t,y.canvasSize.width=c.value,y.canvasSize.height=o.value,l.style.background=m(t),l.style.width=c.value+"px",l.style.height=o.value+"px"}else alert("您已生成画布，次过程中不允许中途再次操做，如需重新生成，请重置画布")})),n.addEventListener("click",(function(){var t=confirm("您将重置画布");t&&window.location.reload()}));var f=document.getElementById("thresholdAdd"),b=document.getElementById("thresholdReduce"),k=document.getElementById("thresholdValue"),L=document.getElementById("uploadControl");f.addEventListener("click",(function(){y.thresholdValue>=17||(y.thresholdValue+=2,k.innerHTML=y.thresholdValue)})),b.addEventListener("click",(function(){y.thresholdValue<2||(y.thresholdValue-=2,k.innerHTML=y.thresholdValue)})),L.addEventListener("change",(function(i){if(t.list.length>=t.maxLength)return alert("最多只能只能由"+t.maxLength+"个图层"),void(n.value="");var n=i.target,a=n.files[0];console.log(a),h(a).then((function(i){n.value="";var r=document.createElement("img");r.src=i;var s=new Image;s.src=i;var o=function(){var i=y.canvasSize,n=i.width,s=i.height;if(this.width>n||this.height>s)alert("不允许图层宽高大于画布宽高");else{l.appendChild(r);var o=g(r,this.width,this.height);o.imgName=a.name,t.add(o),e=!1}};s.addEventListener("load",o)}))})),document.onkeyup=function(t){var e=y.varRemovableLayer;if(e){t.preventDefault();var i=0,n="x",a=y.thresholdValue;switch(t.keyCode){case 38:i=-a,n="y";break;case 37:i=-a;break;case 40:i=a,n="y";break;case 39:i=a;break}e.handDo(i,n)}};var x=document.getElementById("currentLayerContainer");x.addEventListener("click",(function(e){var i=e.target,n=y.varRemovableLayer;if(n){if("delete"===i.dataset.type){this.innerHTML="",t.deleteItem(n);var a=n.el;return a.parentNode.removeChild(a),void(y.varRemovableLayer=null)}if("add"===i.dataset.type){var r=this.querySelector(".set-size-block");return t.forward(n),void(r.innerHTML=n.zIndex)}if("reduce"===i.dataset.type){var s=this.querySelector(".set-size-block");return t.backoff(n),void(s.innerHTML=n.zIndex)}if("setxy"===i.dataset.type){var o=this.querySelector("[data-type='x']").value,c=this.querySelector("[data-type='y']").value;n.moveTo(o,c)}"ispeople"===i.dataset.type&&(n.isPeople=i.checked)}}));var w=document.getElementById("submitSave"),S=document.getElementById("previewBlockImg"),E=document.querySelector("#createImgBlockPopup"),C=document.querySelector("#blockCanvasContent");w.addEventListener("click",(function(){if(console.log(t),console.log(y),t.list.length)if(t.list.some((function(t){return void 0===t.isPeople})))alert("您必须设置每一层图层是否为人像层");else{var e=y.canvasSize,i=e.height,n=e.width,a=document.createElement("canvas");a.height=i,a.width=n,document.body.appendChild(a),d({el:a,width:n,height:i,background:m(y.rgb),data:t.list}),console.log(a.toDataURL("image/png"))}else alert("请上传图层")})),S.addEventListener("click",(function(){var e=y.canvasSize,i=e.height,n=e.width,a=document.createElement("canvas");a.height=i,a.width=n,d({el:a,width:n,height:i,background:m(y.rgb),data:t.list}),C.src=a.toDataURL("image/png"),E.classList.add("create-img-block-popupoff")})),E.addEventListener("click",(function(t){var e=t.target;"close"===e.dataset.type&&E.classList.remove("create-img-block-popupoff")}))}};i("ed05");b.render=s;e["default"]=b},4160:function(t,e,i){"use strict";var n=i("23e7"),a=i("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"45fc":function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").some,r=i("a640"),s=i("ae40"),o=r("some"),c=s("some");n({target:"Array",proto:!0,forced:!o||!c},{some:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,i){var n=i("861d"),a=i("e8b5"),r=i("b622"),s=r("species");t.exports=function(t,e){var i;return a(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!a(i.prototype)?n(i)&&(i=i[s],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},8418:function(t,e,i){"use strict";var n=i("c04e"),a=i("9bf2"),r=i("5c6c");t.exports=function(t,e,i){var s=n(e);s in t?a.f(t,s,r(0,i)):t[s]=i}},"99af":function(t,e,i){"use strict";var n=i("23e7"),a=i("d039"),r=i("e8b5"),s=i("861d"),o=i("7b0b"),c=i("50c4"),l=i("8418"),d=i("65f0"),u=i("1dde"),h=i("b622"),v=i("2d00"),f=h("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",g=v>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=u("concat"),b=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:r(t)},k=!g||!y;n({target:"Array",proto:!0,forced:k},{concat:function(t){var e,i,n,a,r,s=o(this),u=d(s,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?s:arguments[e],b(r)){if(a=c(r.length),h+a>p)throw TypeError(m);for(i=0;i<a;i++,h++)i in r&&l(u,h,r[i])}else{if(h>=p)throw TypeError(m);l(u,h++,r)}return u.length=h,u}})},a434:function(t,e,i){"use strict";var n=i("23e7"),a=i("23cb"),r=i("a691"),s=i("50c4"),o=i("7b0b"),c=i("65f0"),l=i("8418"),d=i("1dde"),u=i("ae40"),h=d("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h||!v},{splice:function(t,e){var i,n,d,u,h,v,y=o(this),b=s(y.length),k=a(t,b),L=arguments.length;if(0===L?i=n=0:1===L?(i=0,n=b-k):(i=L-2,n=p(f(r(e),0),b-k)),b+i-n>m)throw TypeError(g);for(d=c(y,n),u=0;u<n;u++)h=k+u,h in y&&l(d,u,y[h]);if(d.length=n,i<n){for(u=k;u<b-n;u++)h=u+n,v=u+i,h in y?y[v]=y[h]:delete y[v];for(u=b;u>b-n+i;u--)delete y[u-1]}else if(i>n)for(u=b-n;u>k;u--)h=u+n-1,v=u+i-1,h in y?y[v]=y[h]:delete y[v];for(u=0;u<i;u++)y[u+k]=arguments[u+2];return y.length=b-n+i,d}})},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,i){var n=i("83ab"),a=i("d039"),r=i("5135"),s=Object.defineProperty,o={},c=function(t){throw t};t.exports=function(t,e){if(r(o,t))return o[t];e||(e={});var i=[][t],l=!!r(e,"ACCESSORS")&&e.ACCESSORS,d=r(e,0)?e[0]:c,u=r(e,1)?e[1]:void 0;return o[t]=!!i&&!a((function(){if(l&&!n)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:c}):t[1]=1,i.call(t,d,u)}))}},b0c0:function(t,e,i){var n=i("83ab"),a=i("9bf2").f,r=Function.prototype,s=r.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in r)&&a(r,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b727:function(t,e,i){var n=i("0366"),a=i("44ad"),r=i("7b0b"),s=i("50c4"),o=i("65f0"),c=[].push,l=function(t){var e=1==t,i=2==t,l=3==t,d=4==t,u=6==t,h=5==t||u;return function(v,f,p,m){for(var g,y,b=r(v),k=a(b),L=n(f,p,3),x=s(k.length),w=0,S=m||o,E=e?S(v,x):i?S(v,0):void 0;x>w;w++)if((h||w in k)&&(g=k[w],y=L(g,w,b),t))if(e)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:c.call(E,g)}else if(d)return!1;return u?-1:l||d?d:E}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c975:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").indexOf,r=i("a640"),s=i("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),d=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!l||!d},{indexOf:function(t){return c?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").map,r=i("1dde"),s=i("ae40"),o=r("map"),c=s("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,i){var n=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},ed05:function(t,e,i){"use strict";i("3bb7")},fb6a:function(t,e,i){"use strict";var n=i("23e7"),a=i("861d"),r=i("e8b5"),s=i("23cb"),o=i("50c4"),c=i("fc6a"),l=i("8418"),d=i("b622"),u=i("1dde"),h=i("ae40"),v=u("slice"),f=h("slice",{ACCESSORS:!0,0:0,1:2}),p=d("species"),m=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!v||!f},{slice:function(t,e){var i,n,d,u=c(this),h=o(u.length),v=s(t,h),f=s(void 0===e?h:e,h);if(r(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?a(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return m.call(u,v,f);for(n=new(void 0===i?Array:i)(g(f-v,0)),d=0;v<f;v++,d++)v in u&&l(n,d,u[v]);return n.length=d,n}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-34b0b92d.6ab2d3ef.js.map